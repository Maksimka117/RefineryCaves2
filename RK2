-- Main Menu Script for Roblox Injector
-- Combines Freecam, Telekinesis, Part Teleporter, Anti-Blacklist and Player Functions

local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local StarterGui = game:GetService("StarterGui")
local ContextActionService = game:GetService("ContextActionService")

local LocalPlayer = Players.LocalPlayer
if not LocalPlayer then
    Players:GetPropertyChangedSignal("LocalPlayer"):Wait()
    LocalPlayer = Players.LocalPlayer
end

-- ==================== FREE CAMERA SCRIPT ====================
local Freecam = {} do
    local pi = math.pi
    local abs = math.abs
    local clamp = math.clamp
    local rad = math.rad
    
    local Camera = workspace.CurrentCamera
    
    workspace:GetPropertyChangedSignal("CurrentCamera"):Connect(function()
        local newCamera = workspace.CurrentCamera
        if newCamera then
            Camera = newCamera
        end
    end)
    
    local TOGGLE_INPUT_PRIORITY = Enum.ContextActionPriority.Low.Value
    local INPUT_PRIORITY = Enum.ContextActionPriority.High.Value
    local FREECAM_MACRO_KB = {Enum.KeyCode.LeftShift, Enum.KeyCode.P}
    
    local NAV_SPEED = Vector3.new(1, 1, 1) * 120
    local PAN_SPEED = Vector2.new(1.5, 1.5)
    local FOV_SPEED = 100
    
    local PITCH_LIMIT = rad(89)
    local NAV_SHIFT_MUL = 0.25
    local NAV_ADJ_SPEED = 0.5
    
    local cameraPos = Vector3.new()
    local cameraRot = Vector2.new()
    local cameraFov = 70
    local navSpeedMultiplier = 1
    
    local Input = {} do
        local thumbstickCurve do
            local K_CURVATURE = 2.0
            local K_DEADZONE = 0.15
            
            local function fCurve(x)
                return (math.exp(K_CURVATURE * x) - 1) / (math.exp(K_CURVATURE) - 1)
            end
            
            local function fDeadzone(x)
                return fCurve((x - K_DEADZONE) / (1 - K_DEADZONE))
            end
            
            function thumbstickCurve(x)
                return math.sign(x) * clamp(fDeadzone(abs(x)), 0, 1)
            end
        end
        
        local gamepad = {
            ButtonX = 0,
            ButtonY = 0,
            DPadDown = 0,
            DPadUp = 0,
            ButtonL2 = 0,
            ButtonR2 = 0,
            Thumbstick1 = Vector2.new(),
            Thumbstick2 = Vector2.new(),
        }
        
        local keyboard = {
            W = 0,
            A = 0,
            S = 0,
            D = 0,
            E = 0,
            Q = 0,
            U = 0,
            H = 0,
            J = 0,
            K = 0,
            I = 0,
            Y = 0,
            Up = 0,
            Down = 0,
            LeftShift = 0,
            RightShift = 0,
        }
        
        local mouse = {
            Delta = Vector2.new(),
            MouseWheel = 0,
            Captured = false
        }
        
        function Input.Vel(dt)
            navSpeedMultiplier = clamp(navSpeedMultiplier + dt * (keyboard.Up - keyboard.Down) * NAV_ADJ_SPEED, 0.1, 5)
            
            local kGamepad = Vector3.new(
                thumbstickCurve(gamepad.Thumbstick1.x),
                thumbstickCurve(gamepad.ButtonR2) - thumbstickCurve(gamepad.ButtonL2),
                thumbstickCurve(-gamepad.Thumbstick1.y)
            )
            
            local kKeyboard = Vector3.new(
                keyboard.D - keyboard.A + keyboard.K - keyboard.H,
                keyboard.E - keyboard.Q + keyboard.I - keyboard.Y,
                keyboard.S - keyboard.W + keyboard.J - keyboard.U
            )
            
            local shift = UserInputService:IsKeyDown(Enum.KeyCode.LeftShift) or 
                          UserInputService:IsKeyDown(Enum.KeyCode.RightShift)
            
            local speedMultiplier = navSpeedMultiplier * (shift and NAV_SHIFT_MUL or 1)
            
            return (kGamepad + kKeyboard) * NAV_SPEED * speedMultiplier * dt
        end
        
        function Input.Pan(dt)
            local isRightMouseDown = UserInputService:IsMouseButtonPressed(Enum.UserInputType.MouseButton2)
            
            local kGamepad = Vector2.new(
                thumbstickCurve(gamepad.Thumbstick2.y) * 1.5,
                thumbstickCurve(-gamepad.Thumbstick2.x) * 1.5
            ) * PAN_SPEED * dt
            
            local kMouse = Vector2.new(0, 0)
            
            if isRightMouseDown and mouse.Delta then
                kMouse = mouse.Delta * PAN_SPEED * 0.007
                if not mouse.Captured then
                    mouse.Captured = true
                    UserInputService.MouseBehavior = Enum.MouseBehavior.LockCurrentPosition
                end
            elseif mouse.Captured then
                mouse.Captured = false
                UserInputService.MouseBehavior = Enum.MouseBehavior.Default
            end
            
            mouse.Delta = Vector2.new()
            
            return kGamepad + kMouse
        end
        
        function Input.Fov(dt)
            local kGamepad = (gamepad.ButtonX - gamepad.ButtonY) * 0.5
            local kMouse = mouse.MouseWheel * 10
            mouse.MouseWheel = 0
            return (kGamepad + kMouse) * FOV_SPEED * dt
        end
        
        do
            local function Keypress(action, state, input)
                keyboard[input.KeyCode.Name] = state == Enum.UserInputState.Begin and 1 or 0
                return Enum.ContextActionResult.Sink
            end
            
            local function GpButton(action, state, input)
                gamepad[input.KeyCode.Name] = state == Enum.UserInputState.Begin and 1 or 0
                return Enum.ContextActionResult.Sink
            end
            
            local function MousePan(action, state, input)
                local delta = input.Delta
                mouse.Delta = Vector2.new(-delta.y, -delta.x)
                return Enum.ContextActionResult.Sink
            end
            
            local function Thumb(action, state, input)
                gamepad[input.KeyCode.Name] = input.Position
                return Enum.ContextActionResult.Sink
            end
            
            local function Trigger(action, state, input)
                gamepad[input.KeyCode.Name] = input.Position.z
                return Enum.ContextActionResult.Sink
            end
            
            local function MouseWheel(action, state, input)
                mouse[input.UserInputType.Name] = -input.Position.z
                return Enum.ContextActionResult.Sink
            end
            
            local function Zero(t)
                for k, v in pairs(t) do
                    t[k] = v * 0
                end
            end
            
            function Input.StartCapture()
                ContextActionService:BindActionAtPriority("FreecamKeyboard", Keypress, false, INPUT_PRIORITY,
                    Enum.KeyCode.W, Enum.KeyCode.U,
                    Enum.KeyCode.A, Enum.KeyCode.H,
                    Enum.KeyCode.S, Enum.KeyCode.J,
                    Enum.KeyCode.D, Enum.KeyCode.K,
                    Enum.KeyCode.E, Enum.KeyCode.I,
                    Enum.KeyCode.Q, Enum.KeyCode.Y,
                    Enum.KeyCode.Up, Enum.KeyCode.Down
                )
                ContextActionService:BindActionAtPriority("FreecamMousePan", MousePan, false, INPUT_PRIORITY, Enum.UserInputType.MouseMovement)
                ContextActionService:BindActionAtPriority("FreecamMouseWheel", MouseWheel, false, INPUT_PRIORITY, Enum.UserInputType.MouseWheel)
                ContextActionService:BindActionAtPriority("FreecamGamepadButton", GpButton, false, INPUT_PRIORITY, Enum.KeyCode.ButtonX, Enum.KeyCode.ButtonY)
                ContextActionService:BindActionAtPriority("FreecamGamepadTrigger", Trigger, false, INPUT_PRIORITY, Enum.KeyCode.ButtonR2, Enum.KeyCode.ButtonL2)
                ContextActionService:BindActionAtPriority("FreecamGamepadThumbstick", Thumb, false, INPUT_PRIORITY, Enum.KeyCode.Thumbstick1, Enum.KeyCode.Thumbstick2)
            end
            
            function Input.StopCapture()
                navSpeedMultiplier = 1
                Zero(gamepad)
                Zero(keyboard)
                mouse.Delta = Vector2.new()
                mouse.MouseWheel = 0
                
                if mouse.Captured then
                    mouse.Captured = false
                    UserInputService.MouseBehavior = Enum.MouseBehavior.Default
                end
                
                ContextActionService:UnbindAction("FreecamKeyboard")
                ContextActionService:UnbindAction("FreecamMousePan")
                ContextActionService:UnbindAction("FreecamMouseWheel")
                ContextActionService:UnbindAction("FreecamGamepadButton")
                ContextActionService:UnbindAction("FreecamGamepadTrigger")
                ContextActionService:UnbindAction("FreecamGamepadThumbstick")
            end
        end
    end
    
    local function GetFocusDistance(cameraFrame)
        local znear = 0.1
        local viewport = Camera.ViewportSize
        local projy = 2 * math.tan(cameraFov / 2)
        local projx = viewport.x / viewport.y * projy
        local fx = cameraFrame.rightVector
        local fy = cameraFrame.upVector
        local fz = cameraFrame.lookVector
        
        local minVect = Vector3.new()
        local minDist = 512
        
        for x = 0, 1, 0.5 do
            for y = 0, 1, 0.5 do
                local cx = (x - 0.5) * projx
                local cy = (y - 0.5) * projy
                local offset = fx * cx - fy * cy + fz
                local origin = cameraFrame.p + offset * znear
                local part, hit = workspace:FindPartOnRay(Ray.new(origin, offset.unit * minDist))
                local dist = (hit - origin).magnitude
                if minDist > dist then
                    minDist = dist
                    minVect = offset.unit
                end
            end
        end
        
        return fz:Dot(minVect) * minDist
    end
    
    local function StepFreecam(dt)
        local vel = Input.Vel(dt)
        local pan = Input.Pan(dt)
        local fov = Input.Fov(dt)
        
        cameraFov = clamp(cameraFov + fov, 1, 120)
        
        cameraRot = cameraRot + pan
        cameraRot = Vector2.new(
            clamp(cameraRot.x, -PITCH_LIMIT, PITCH_LIMIT),
            cameraRot.y % (2 * pi)
        )
        
        local cameraCFrame = CFrame.new(cameraPos) * 
                             CFrame.fromOrientation(cameraRot.x, cameraRot.y, 0)
        
        cameraPos = cameraPos + cameraCFrame:vectorToWorldSpace(vel)
        
        cameraCFrame = CFrame.new(cameraPos) * 
                       CFrame.fromOrientation(cameraRot.x, cameraRot.y, 0)
        
        Camera.CFrame = cameraCFrame
        Camera.Focus = cameraCFrame * CFrame.new(0, 0, -GetFocusDistance(cameraCFrame))
        Camera.FieldOfView = cameraFov
    end
    
    local PlayerState = {} do
        local cameraSubject
        local cameraType
        local cameraFocus
        local cameraCFrame
        local cameraFieldOfView
        local mouseIconEnabled
        
        function PlayerState.Push()
            cameraFieldOfView = Camera.FieldOfView
            Camera.FieldOfView = 70
            
            cameraType = Camera.CameraType
            Camera.CameraType = Enum.CameraType.Custom
            
            cameraSubject = Camera.CameraSubject
            Camera.CameraSubject = nil
            
            cameraCFrame = Camera.CFrame
            cameraFocus = Camera.Focus
            
            mouseIconEnabled = UserInputService.MouseIconEnabled
            UserInputService.MouseIconEnabled = true
            
            mouseBehavior = UserInputService.MouseBehavior
            UserInputService.MouseBehavior = Enum.MouseBehavior.Default
        end
        
        function PlayerState.Pop()
            Camera.FieldOfView = cameraFieldOfView
            Camera.CameraType = cameraType
            Camera.CameraSubject = cameraSubject
            Camera.CFrame = cameraCFrame
            Camera.Focus = cameraFocus
            
            UserInputService.MouseIconEnabled = mouseIconEnabled
            UserInputService.MouseBehavior = mouseBehavior
        end
    end
    
    local function StartFreecam()
        local cameraCFrame = Camera.CFrame
        cameraRot = Vector2.new(cameraCFrame:toEulerAnglesYXZ())
        cameraPos = cameraCFrame.p
        cameraFov = Camera.FieldOfView
        
        PlayerState.Push()
        RunService:BindToRenderStep("Freecam", Enum.RenderPriority.Camera.Value, StepFreecam)
        Input.StartCapture()
    end
    
    local function StopFreecam()
        Input.StopCapture()
        RunService:UnbindFromRenderStep("Freecam")
        PlayerState.Pop()
    end
    
    local enabled = false
    
    function Freecam.Toggle()
        if enabled then
            StopFreecam()
            print("Freecam –≤—ã–∫–ª—é—á–µ–Ω–∞")
        else
            StartFreecam()
            print("Freecam –≤–∫–ª—é—á–µ–Ω–∞ - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ü–†–ê–í–£–Æ –∫–Ω–æ–ø–∫—É –º—ã—à–∏ –¥–ª—è –≤—Ä–∞—â–µ–Ω–∏—è –∫–∞–º–µ—Ä—ã")
        end
        enabled = not enabled
    end
    
    function Freecam.Start()
        if not enabled then
            StartFreecam()
            enabled = true
        end
    end
    
    function Freecam.Stop()
        if enabled then
            StopFreecam()
            enabled = false
        end
    end
    
    function Freecam.IsEnabled()
        return enabled
    end
    
    -- –°–∏—Å—Ç–µ–º–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –ø–æ Shift+P
    local function CheckMacro(macro)
        for i = 1, #macro - 1 do
            if not UserInputService:IsKeyDown(macro[i]) then
                return
            end
        end
        Freecam.Toggle()
    end
    
    local function HandleActivationInput(action, state, input)
        if state == Enum.UserInputState.Begin then
            if input.KeyCode == FREECAM_MACRO_KB[#FREECAM_MACRO_KB] then
                CheckMacro(FREECAM_MACRO_KB)
            end
        end
        return Enum.ContextActionResult.Pass
    end
    
    ContextActionService:BindActionAtPriority("FreecamToggle", HandleActivationInput, false, TOGGLE_INPUT_PRIORITY, FREECAM_MACRO_KB[#FREECAM_MACRO_KB])
end

-- ==================== MAIN GUI CREATION ====================
local MainGUI = Instance.new("ScreenGui")
MainGUI.Name = "MainMenuGUI"
MainGUI.ResetOnSpawn = false -- –í–∞–∂–Ω–æ! –ù–µ –ø—Ä–æ–ø–∞–¥–∞–µ—Ç –ø–æ—Å–ª–µ —Å–º–µ—Ä—Ç–∏
MainGUI.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
MainGUI.Parent = game:GetService("CoreGui")

-- Main Container
local MainContainer = Instance.new("Frame")
MainContainer.Name = "MainContainer"
MainContainer.Size = UDim2.new(0, 400, 0, 450)
MainContainer.Position = UDim2.new(0.5, -200, 0.5, -225)
MainContainer.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
MainContainer.BorderSizePixel = 0
MainContainer.Active = true
MainContainer.Draggable = true
MainContainer.Parent = MainGUI

local UICorner = Instance.new("UICorner")
UICorner.CornerRadius = UDim.new(0, 8)
UICorner.Parent = MainContainer

-- Title Bar
local TitleBar = Instance.new("Frame")
TitleBar.Name = "TitleBar"
TitleBar.Size = UDim2.new(1, 0, 0, 40)
TitleBar.BackgroundColor3 = Color3.fromRGB(35, 35, 45)
TitleBar.BorderSizePixel = 0
TitleBar.Parent = MainContainer

local TitleCorner = Instance.new("UICorner")
TitleCorner.CornerRadius = UDim.new(0, 8)
TitleCorner.Parent = TitleBar

local TitleLabel = Instance.new("TextLabel")
TitleLabel.Name = "TitleLabel"
TitleLabel.Size = UDim2.new(1, -80, 1, 0)
TitleLabel.Position = UDim2.new(0, 10, 0, 0)
TitleLabel.BackgroundTransparency = 1
TitleLabel.Text = "üéÆ Main Menu"
TitleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
TitleLabel.TextXAlignment = Enum.TextXAlignment.Left
TitleLabel.Font = Enum.Font.GothamBold
TitleLabel.TextSize = 16
TitleLabel.Parent = TitleBar

local CloseButton = Instance.new("TextButton")
CloseButton.Name = "CloseButton"
CloseButton.Size = UDim2.new(0, 30, 0, 30)
CloseButton.Position = UDim2.new(1, -35, 0.5, -15)
CloseButton.BackgroundColor3 = Color3.fromRGB(200, 60, 60)
CloseButton.Text = "X"
CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseButton.Font = Enum.Font.GothamBold
CloseButton.TextSize = 14
CloseButton.Parent = TitleBar

local CloseCorner = Instance.new("UICorner")
CloseCorner.CornerRadius = UDim.new(0, 6)
CloseCorner.Parent = CloseButton

-- Tab Buttons
local TabsContainer = Instance.new("Frame")
TabsContainer.Name = "TabsContainer"
TabsContainer.Size = UDim2.new(1, -20, 0, 40)
TabsContainer.Position = UDim2.new(0, 10, 0, 45)
TabsContainer.BackgroundTransparency = 1
TabsContainer.Parent = MainContainer

local TabButtons = {
    "Telekinesis",
    "Part Teleporter", 
    "Anti-Blacklist",
    "Player"
}

local CurrentTab = "Telekinesis"
local TabFrames = {}

-- Create Tab Buttons
for i, tabName in ipairs(TabButtons) do
    local TabButton = Instance.new("TextButton")
    TabButton.Name = tabName .. "Tab"
    TabButton.Size = UDim2.new(0.23, 0, 1, 0)
    TabButton.Position = UDim2.new((i-1) * 0.25, 0, 0, 0)
    TabButton.BackgroundColor3 = i == 1 and Color3.fromRGB(60, 60, 80) or Color3.fromRGB(45, 45, 55)
    TabButton.Text = tabName
    TabButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    TabButton.Font = Enum.Font.Gotham
    TabButton.TextSize = 12
    TabButton.Parent = TabsContainer
    
    local TabCorner = Instance.new("UICorner")
    TabCorner.CornerRadius = UDim.new(0, 6)
    TabCorner.Parent = TabButton
    
    -- Create Tab Content Frame
    local TabFrame = Instance.new("Frame")
    TabFrame.Name = tabName .. "Frame"
    TabFrame.Size = UDim2.new(1, -20, 1, -95)
    TabFrame.Position = UDim2.new(0, 10, 0, 95)
    TabFrame.BackgroundTransparency = 1
    TabFrame.Visible = i == 1
    TabFrame.Parent = MainContainer
    
    TabFrames[tabName] = TabFrame
    
    TabButton.MouseButton1Click:Connect(function()
        CurrentTab = tabName
        for name, frame in pairs(TabFrames) do
            frame.Visible = (name == tabName)
        end
        for j, btnName in ipairs(TabButtons) do
            local btn = TabsContainer:FindFirstChild(btnName .. "Tab")
            if btn then
                btn.BackgroundColor3 = (btnName == tabName) and Color3.fromRGB(60, 60, 80) or Color3.fromRGB(45, 45, 55)
            end
        end
    end)
end

-- ==================== TELEKINESIS TAB ====================
local TelekinesisFrame = TabFrames["Telekinesis"]

-- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ç–µ–ª–µ–∫–∏–Ω–µ–∑–∞
local isTelekinesisEnabled = false
local currentParts = {}
local currentMode = "single"
local connectionTelekinesis = nil
local currentDistance = 10
local minDistance = 2
local maxDistance = 100
local distanceStep = 5
local currentRadius = 10
local minRadius = 5
local maxRadius = 50
local radiusStep = 5

local Mouse = LocalPlayer:GetMouse()

-- –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —á–∞—Å—Ç—å —á–∞—Å—Ç—å—é –∏–≥—Ä–æ–∫–∞
local function isPlayerPart(part)
    local model = part:FindFirstAncestorOfClass("Model")
    if model then
        local humanoid = model:FindFirstChildOfClass("Humanoid")
        if humanoid then
            local player = Players:GetPlayerFromCharacter(model)
            if player then
                return true
            end
        end
    end
    return false
end

-- –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏, –º–æ–∂–Ω–æ –ª–∏ –ø–æ–¥–Ω—è—Ç—å –æ–±—ä–µ–∫—Ç
local function canPickupPart(part)
    if not part:IsA("BasePart") then
        return false
    end
    
    if part.Anchored then
        return false
    end
    
    if part.Locked then
        return false
    end
    
    if isPlayerPart(part) then
        return false
    end
    
    local tool = part:FindFirstAncestorOfClass("Tool")
    if tool then
        return false
    end
    
    return true
end

-- –§—É–Ω–∫—Ü–∏—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏ –ø–µ—Ä–µ–¥ –∫–∞–º–µ—Ä–æ–π
local function getTargetPosition()
    local camera = workspace.CurrentCamera
    local mouseRay = camera:ScreenPointToRay(Mouse.X, Mouse.Y)
    return camera.CFrame.Position + mouseRay.Direction * currentDistance
end

-- Toggle Button –¥–ª—è —Ç–µ–ª–µ–∫–∏–Ω–µ–∑–∞
local TelekinesisToggleButton = Instance.new("TextButton")
TelekinesisToggleButton.Name = "TelekinesisToggleButton"
TelekinesisToggleButton.Size = UDim2.new(0.8, 0, 0, 30)
TelekinesisToggleButton.Position = UDim2.new(0.1, 0, 0, 10)
TelekinesisToggleButton.BackgroundColor3 = Color3.fromRGB(80, 80, 100)
TelekinesisToggleButton.Text = "–¢–µ–ª–µ–∫–∏–Ω–µ–∑: OFF"
TelekinesisToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
TelekinesisToggleButton.Font = Enum.Font.Gotham
TelekinesisToggleButton.TextSize = 12
TelekinesisToggleButton.Parent = TelekinesisFrame

local TelekinesisToggleCorner = Instance.new("UICorner")
TelekinesisToggleCorner.CornerRadius = UDim.new(0, 6)
TelekinesisToggleCorner.Parent = TelekinesisToggleButton

-- –†–µ–∂–∏–º –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è
local ModeButton = Instance.new("TextButton")
ModeButton.Name = "ModeButton"
ModeButton.Size = UDim2.new(0.8, 0, 0, 30)
ModeButton.Position = UDim2.new(0.1, 0, 0, 50)
ModeButton.BackgroundColor3 = Color3.fromRGB(60, 100, 180)
ModeButton.Text = "–†–µ–∂–∏–º: –û–¥–∏–Ω –æ–±—ä–µ–∫—Ç"
ModeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ModeButton.Font = Enum.Font.Gotham
ModeButton.TextSize = 12
ModeButton.Parent = TelekinesisFrame

local ModeCorner = Instance.new("UICorner")
ModeCorner.CornerRadius = UDim.new(0, 6)
ModeCorner.Parent = ModeButton

-- –î–∏—Å—Ç–∞–Ω—Ü–∏—è
local DistanceLabel = Instance.new("TextLabel")
DistanceLabel.Name = "DistanceLabel"
DistanceLabel.Size = UDim2.new(0.6, 0, 0, 25)
DistanceLabel.Position = UDim2.new(0.1, 0, 0, 90)
DistanceLabel.BackgroundTransparency = 1
DistanceLabel.Text = "–î–∏—Å—Ç–∞–Ω—Ü–∏—è: 10 studs"
DistanceLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
DistanceLabel.TextXAlignment = Enum.TextXAlignment.Left
DistanceLabel.Font = Enum.Font.Gotham
DistanceLabel.TextSize = 12
DistanceLabel.Parent = TelekinesisFrame

-- –ö–Ω–æ–ø–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏
local DistanceUpButton = Instance.new("TextButton")
DistanceUpButton.Name = "DistanceUpButton"
DistanceUpButton.Size = UDim2.new(0.1, 0, 0, 25)
DistanceUpButton.Position = UDim2.new(0.7, 0, 0, 90)
DistanceUpButton.BackgroundColor3 = Color3.fromRGB(60, 180, 60)
DistanceUpButton.Text = "+"
DistanceUpButton.TextColor3 = Color3.fromRGB(255, 255, 255)
DistanceUpButton.Font = Enum.Font.GothamBold
DistanceUpButton.TextSize = 14
DistanceUpButton.Parent = TelekinesisFrame

local DistanceDownButton = Instance.new("TextButton")
DistanceDownButton.Name = "DistanceDownButton"
DistanceDownButton.Size = UDim2.new(0.1, 0, 0, 25)
DistanceDownButton.Position = UDim2.new(0.82, 0, 0, 90)
DistanceDownButton.BackgroundColor3 = Color3.fromRGB(180, 60, 60)
DistanceDownButton.Text = "-"
DistanceDownButton.TextColor3 = Color3.fromRGB(255, 255, 255)
DistanceDownButton.Font = Enum.Font.GothamBold
DistanceDownButton.TextSize = 14
DistanceDownButton.Parent = TelekinesisFrame

-- –†–∞–¥–∏—É—Å (—Ç–æ–ª—å–∫–æ –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞)
local RadiusLabel = Instance.new("TextLabel")
RadiusLabel.Name = "RadiusLabel"
RadiusLabel.Size = UDim2.new(0.6, 0, 0, 25)
RadiusLabel.Position = UDim2.new(0.1, 0, 0, 130)
RadiusLabel.BackgroundTransparency = 1
RadiusLabel.Text = "–†–∞–¥–∏—É—Å: 10 studs"
RadiusLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
RadiusLabel.TextXAlignment = Enum.TextXAlignment.Left
RadiusLabel.Font = Enum.Font.Gotham
RadiusLabel.TextSize = 12
RadiusLabel.Parent = TelekinesisFrame

-- –ö–Ω–æ–ø–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–¥–∏—É—Å–∞
local RadiusUpButton = Instance.new("TextButton")
RadiusUpButton.Name = "RadiusUpButton"
RadiusUpButton.Size = UDim2.new(0.1, 0, 0, 25)
RadiusUpButton.Position = UDim2.new(0.7, 0, 0, 130)
RadiusUpButton.BackgroundColor3 = Color3.fromRGB(60, 180, 60)
RadiusUpButton.Text = "+"
RadiusUpButton.TextColor3 = Color3.fromRGB(255, 255, 255)
RadiusUpButton.Font = Enum.Font.GothamBold
RadiusUpButton.TextSize = 14
RadiusUpButton.Parent = TelekinesisFrame

local RadiusDownButton = Instance.new("TextButton")
RadiusDownButton.Name = "RadiusDownButton"
RadiusDownButton.Size = UDim2.new(0.1, 0, 0, 25)
RadiusDownButton.Position = UDim2.new(0.82, 0, 0, 130)
RadiusDownButton.BackgroundColor3 = Color3.fromRGB(180, 60, 60)
RadiusDownButton.Text = "-"
RadiusDownButton.TextColor3 = Color3.fromRGB(255, 255, 255)
RadiusDownButton.Font = Enum.Font.GothamBold
RadiusDownButton.TextSize = 14
RadiusDownButton.Parent = TelekinesisFrame

-- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
local InstructionLabel = Instance.new("TextLabel")
InstructionLabel.Name = "InstructionLabel"
InstructionLabel.Size = UDim2.new(0.8, 0, 0, 80)
InstructionLabel.Position = UDim2.new(0.1, 0, 0, 170)
InstructionLabel.BackgroundTransparency = 1
InstructionLabel.Text = "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:\n–õ–ö–ú - –ø–æ–¥–Ω—è—Ç—å –æ–±—ä–µ–∫—Ç\n–û—Ç–ø—É—Å—Ç–∏—Ç—å –õ–ö–ú - –æ—Ç–ø—É—Å—Ç–∏—Ç—å\nShift + –ö–æ–ª–µ—Å–∏–∫–æ - —Ä–∞–¥–∏—É—Å\nCtrl + –ö–æ–ª–µ—Å–∏–∫–æ - –¥–∏—Å—Ç–∞–Ω—Ü–∏—è"
InstructionLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
InstructionLabel.Font = Enum.Font.Gotham
InstructionLabel.TextSize = 11
InstructionLabel.TextWrapped = true
InstructionLabel.Parent = TelekinesisFrame

-- –§—É–Ω–∫—Ü–∏–∏ —Ç–µ–ª–µ–∫–∏–Ω–µ–∑–∞
local function updateDistanceDisplay()
    DistanceLabel.Text = "–î–∏—Å—Ç–∞–Ω—Ü–∏—è: " .. currentDistance .. " studs"
end

local function updateRadiusDisplay()
    RadiusLabel.Text = "–†–∞–¥–∏—É—Å: " .. currentRadius .. " studs"
end

local function toggleMode()
    if currentMode == "single" then
        currentMode = "multi"
        ModeButton.Text = "–†–µ–∂–∏–º: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π"
        ModeButton.BackgroundColor3 = Color3.fromRGB(180, 100, 60)
        RadiusLabel.Visible = true
        RadiusUpButton.Visible = true
        RadiusDownButton.Visible = true
    else
        currentMode = "single"
        ModeButton.Text = "–†–µ–∂–∏–º: –û–¥–∏–Ω –æ–±—ä–µ–∫—Ç"
        ModeButton.BackgroundColor3 = Color3.fromRGB(60, 100, 180)
        RadiusLabel.Visible = false
        RadiusUpButton.Visible = false
        RadiusDownButton.Visible = false
    end
end

local function releasePart(partData)
    if partData.bodyPosition then
        partData.bodyPosition:Destroy()
    end
    if partData.bodyGyro then
        partData.bodyGyro:Destroy()
    end
    if partData.highlight then
        partData.highlight:Destroy()
    end
    if partData.part then
        partData.part.CustomPhysicalProperties = nil
    end
end

local function releaseAllParts()
    for _, partData in pairs(currentParts) do
        releasePart(partData)
    end
    currentParts = {}
end

local function pickupSinglePart(part)
    if not canPickupPart(part) then
        return nil
    end
    
    part.CustomPhysicalProperties = PhysicalProperties.new(0.1, 0, 0, 0, 0)
    
    local bodyPosition = Instance.new("BodyPosition")
    bodyPosition.Position = getTargetPosition()
    bodyPosition.MaxForce = Vector3.new(40000, 40000, 40000)
    bodyPosition.P = 10000
    bodyPosition.D = 1000
    bodyPosition.Parent = part
    
    local bodyGyro = Instance.new("BodyGyro")
    bodyGyro.MaxTorque = Vector3.new(40000, 40000, 40000)
    bodyGyro.P = 10000
    bodyGyro.D = 1000
    bodyGyro.CFrame = part.CFrame
    bodyGyro.Parent = part
    
    local highlight = Instance.new("SelectionBox")
    highlight.Adornee = part
    highlight.Color3 = Color3.fromRGB(0, 255, 127)
    highlight.LineThickness = 0.05
    highlight.Parent = part
    
    return {
        part = part,
        bodyPosition = bodyPosition,
        bodyGyro = bodyGyro,
        highlight = highlight,
        offset = Vector3.new(0, 0, 0)
    }
end

local function findPartsInRadius(centerPosition, radius)
    local foundParts = {}
    
    for _, part in pairs(workspace:GetDescendants()) do
        if canPickupPart(part) then
            local distance = (part.Position - centerPosition).Magnitude
            if distance <= radius then
                table.insert(foundParts, part)
            end
        end
    end
    
    return foundParts
end

local function pickupMultipleParts(centerPosition)
    local parts = findPartsInRadius(centerPosition, currentRadius)
    local pickedParts = {}
    
    for _, part in pairs(parts) do
        local partData = pickupSinglePart(part)
        if partData then
            partData.offset = part.Position - centerPosition
            table.insert(pickedParts, partData)
        end
    end
    
    return pickedParts
end

local function pickupPart(target)
    if not isTelekinesisEnabled then return end
    
    if not canPickupPart(target) then
        return
    end
    
    if currentMode == "single" then
        local partData = pickupSinglePart(target)
        if partData then
            currentParts = {partData}
        end
    else
        local centerPosition = target.Position
        currentParts = pickupMultipleParts(centerPosition)
    end
end

-- –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª —Ç–µ–ª–µ–∫–∏–Ω–µ–∑–∞
connectionTelekinesis = RunService.Heartbeat:Connect(function()
    if isTelekinesisEnabled and #currentParts > 0 then
        local targetPosition = getTargetPosition()
        
        for i, partData in pairs(currentParts) do
            if partData.bodyPosition then
                if currentMode == "single" then
                    partData.bodyPosition.Position = targetPosition
                else
                    partData.bodyPosition.Position = targetPosition + partData.offset
                end
                
                if partData.bodyGyro then
                    partData.bodyGyro.CFrame = partData.bodyGyro.CFrame:Lerp(
                        CFrame.lookAt(partData.part.Position, targetPosition), 0.1
                    )
                end
            end
        end
    end
end)

-- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–ª–µ—Å–∏–∫–∞ –º—ã—à–∏ –¥–ª—è —Ç–µ–ª–µ–∫–∏–Ω–µ–∑–∞
UserInputService.InputChanged:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    
    if input.UserInputType == Enum.UserInputType.MouseWheel then
        local isShiftPressed = UserInputService:IsKeyDown(Enum.KeyCode.LeftShift) or 
                              UserInputService:IsKeyDown(Enum.KeyCode.RightShift)
        
        local isCtrlPressed = UserInputService:IsKeyDown(Enum.KeyCode.LeftControl) or 
                             UserInputService:IsKeyDown(Enum.KeyCode.RightControl)
        
        if isCtrlPressed and isTelekinesisEnabled then
            if input.Position.Z > 0 then
                currentDistance = math.min(currentDistance + distanceStep, maxDistance)
            else
                currentDistance = math.max(currentDistance - distanceStep, minDistance)
            end
            updateDistanceDisplay()
        elseif isShiftPressed and isTelekinesisEnabled and currentMode == "multi" then
            if input.Position.Z > 0 then
                currentRadius = math.min(currentRadius + radiusStep, maxRadius)
            else
                currentRadius = math.max(currentRadius - radiusStep, minRadius)
            end
            updateRadiusDisplay()
        end
    end
end)

-- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –º—ã—à–∏ –¥–ª—è —Ç–µ–ª–µ–∫–∏–Ω–µ–∑–∞
local function onMouseClick()
    if not isTelekinesisEnabled then return end
    
    local target = Mouse.Target
    if target and canPickupPart(target) then
        pickupPart(target)
    end
end

local function onMouseRelease()
    if isTelekinesisEnabled then
        releaseAllParts()
    end
end

Mouse.Button1Down:Connect(onMouseClick)
Mouse.Button1Up:Connect(onMouseRelease)

-- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫ —Ç–µ–ª–µ–∫–∏–Ω–µ–∑–∞
TelekinesisToggleButton.MouseButton1Click:Connect(function()
    isTelekinesisEnabled = not isTelekinesisEnabled
    
    if isTelekinesisEnabled then
        TelekinesisToggleButton.Text = "–¢–µ–ª–µ–∫–∏–Ω–µ–∑: ON"
        TelekinesisToggleButton.BackgroundColor3 = Color3.fromRGB(0, 150, 80)
    else
        TelekinesisToggleButton.Text = "–¢–µ–ª–µ–∫–∏–Ω–µ–∑: OFF"
        TelekinesisToggleButton.BackgroundColor3 = Color3.fromRGB(80, 80, 100)
        releaseAllParts()
    end
end)

ModeButton.MouseButton1Click:Connect(toggleMode)

DistanceUpButton.MouseButton1Click:Connect(function()
    currentDistance = math.min(currentDistance + distanceStep, maxDistance)
    updateDistanceDisplay()
end)

DistanceDownButton.MouseButton1Click:Connect(function()
    currentDistance = math.max(currentDistance - distanceStep, minDistance)
    updateDistanceDisplay()
end)

RadiusUpButton.MouseButton1Click:Connect(function()
    currentRadius = math.min(currentRadius + radiusStep, maxRadius)
    updateRadiusDisplay()
end)

RadiusDownButton.MouseButton1Click:Connect(function()
    currentRadius = math.max(currentRadius - radiusStep, minRadius)
    updateRadiusDisplay()
end)

-- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–ª–µ–∫–∏–Ω–µ–∑–∞
updateDistanceDisplay()
updateRadiusDisplay()
RadiusLabel.Visible = false
RadiusUpButton.Visible = false
RadiusDownButton.Visible = false

-- ==================== PART TELEPORTER TAB ====================
local PartTeleporterFrame = TabFrames["Part Teleporter"]

-- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è Part Teleporter
local selectionMode = "OFF"
local selectedParts = {}
local selectionBoxes = {}
local frozenParts = {}
local originalProperties = {}

local function createSelectionBox(part)
    if selectionBoxes[part] then
        selectionBoxes[part]:Destroy()
    end
    
    local box = Instance.new("SelectionBox")
    box.Adornee = part
    box.Color3 = Color3.fromRGB(255, 0, 255)
    box.LineThickness = 0.05
    box.SurfaceColor3 = Color3.fromRGB(255, 0, 255)
    box.Parent = MainGUI
    
    selectionBoxes[part] = box
    return box
end

local function removeSelectionBox(part)
    if selectionBoxes[part] then
        selectionBoxes[part]:Destroy()
        selectionBoxes[part] = nil
    end
end

local function clearAllSelections()
    for part, box in pairs(selectionBoxes) do
        if box then
            box:Destroy()
        end
    end
    selectionBoxes = {}
    selectedParts = {}
end

local function freezePart(part)
    if frozenParts[part] then return end
    
    originalProperties[part] = {
        Anchored = part.Anchored,
        CanCollide = part.CanCollide,
        Transparency = part.Transparency
    }
    
    part.Anchored = true
    part.CanCollide = false
    part.Transparency = 0.5
    
    if selectionBoxes[part] then
        selectionBoxes[part].Color3 = Color3.fromRGB(0, 100, 255)
        selectionBoxes[part].SurfaceColor3 = Color3.fromRGB(0, 100, 255)
    end
    
    frozenParts[part] = true
    return true
end

local function unfreezePart(part)
    if not frozenParts[part] then return end
    
    local props = originalProperties[part]
    if props then
        part.Anchored = props.Anchored
        part.CanCollide = props.CanCollide
        part.Transparency = props.Transparency
    end
    
    if selectionBoxes[part] then
        selectionBoxes[part].Color3 = Color3.fromRGB(255, 0, 255)
        selectionBoxes[part].SurfaceColor3 = Color3.fromRGB(255, 0, 255)
    end
    
    frozenParts[part] = nil
    originalProperties[part] = nil
    return true
end

local function freezeSelected()
    local frozenCount = 0
    for part, _ in pairs(selectedParts) do
        if part and part:IsA("BasePart") and part.Parent then
            local success = pcall(function()
                if freezePart(part) then
                    frozenCount = frozenCount + 1
                end
            end)
        end
    end
end

local function unfreezeSelected()
    local unfrozenCount = 0
    for part, _ in pairs(selectedParts) do
        if part and part:IsA("BasePart") then
            local success = pcall(function()
                if unfreezePart(part) then
                    unfrozenCount = unfrozenCount + 1
                end
            end)
        end
    end
end

local function teleportToCluster()
    local character = LocalPlayer.Character
    if not character or not character:FindFirstChild("HumanoidRootPart") then
        return
    end
    
    local humanoidRootPart = character.HumanoidRootPart
    local basePosition = humanoidRootPart.Position + humanoidRootPart.CFrame.LookVector * 3
    
    local partCount = 0
    for part, _ in pairs(selectedParts) do
        if part and part:IsA("BasePart") and part.Parent then
            partCount = partCount + 1
        end
    end
    
    if partCount == 0 then
        return
    end
    
    local radius = math.min(math.sqrt(partCount) * 0.8, 5)
    local angleStep = (2 * math.pi) / math.max(partCount, 1)
    local currentAngle = 0
    
    local teleportedCount = 0
    for part, _ in pairs(selectedParts) do
        if part and part:IsA("BasePart") and part.Parent then
            local success = pcall(function()
                local offsetX = math.cos(currentAngle) * radius * 0.7
                local offsetZ = math.sin(currentAngle) * radius * 0.7
                local teleportPosition = basePosition + Vector3.new(offsetX, 0, offsetZ)
                
                local randomOffset = Vector3.new(
                    math.random(-0.5, 0.5),
                    math.random(0, 1.5),
                    math.random(-0.5, 0.5)
                )
                
                part.CFrame = CFrame.new(teleportPosition + randomOffset)
                currentAngle = currentAngle + angleStep
                teleportedCount = teleportedCount + 1
                
                if partCount > 10 then
                    radius = math.min(radius * 0.95, 3)
                end
            end)
        end
    end
end

-- –ö–Ω–æ–ø–∫–∏ –¥–ª—è Part Teleporter
local SelectToggleButton = Instance.new("TextButton")
SelectToggleButton.Name = "SelectToggleButton"
SelectToggleButton.Size = UDim2.new(0.8, 0, 0, 30)
SelectToggleButton.Position = UDim2.new(0.1, 0, 0, 10)
SelectToggleButton.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
SelectToggleButton.Text = "Select Mode: OFF"
SelectToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
SelectToggleButton.Font = Enum.Font.Gotham
SelectToggleButton.TextSize = 12
SelectToggleButton.Parent = PartTeleporterFrame

local SelectToggleCorner = Instance.new("UICorner")
SelectToggleCorner.CornerRadius = UDim.new(0, 6)
SelectToggleCorner.Parent = SelectToggleButton

local TeleportButton = Instance.new("TextButton")
TeleportButton.Name = "TeleportButton"
TeleportButton.Size = UDim2.new(0.8, 0, 0, 30)
TeleportButton.Position = UDim2.new(0.1, 0, 0, 50)
TeleportButton.BackgroundColor3 = Color3.fromRGB(60, 120, 60)
TeleportButton.Text = "Teleport Selected"
TeleportButton.TextColor3 = Color3.fromRGB(255, 255, 255)
TeleportButton.Font = Enum.Font.Gotham
TeleportButton.TextSize = 12
TeleportButton.Parent = PartTeleporterFrame

local TeleportCorner = Instance.new("UICorner")
TeleportCorner.CornerRadius = UDim.new(0, 6)
TeleportCorner.Parent = TeleportButton

local FreezeButton = Instance.new("TextButton")
FreezeButton.Name = "FreezeButton"
FreezeButton.Size = UDim2.new(0.8, 0, 0, 30)
FreezeButton.Position = UDim2.new(0.1, 0, 0, 90)
FreezeButton.BackgroundColor3 = Color3.fromRGB(60, 60, 120)
FreezeButton.Text = "Freeze Selected"
FreezeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
FreezeButton.Font = Enum.Font.Gotham
FreezeButton.TextSize = 12
FreezeButton.Parent = PartTeleporterFrame

local FreezeCorner = Instance.new("UICorner")
FreezeCorner.CornerRadius = UDim.new(0, 6)
FreezeCorner.Parent = FreezeButton

local UnfreezeButton = Instance.new("TextButton")
UnfreezeButton.Name = "UnfreezeButton"
UnfreezeButton.Size = UDim2.new(0.8, 0, 0, 30)
UnfreezeButton.Position = UDim2.new(0.1, 0, 0, 130)
UnfreezeButton.BackgroundColor3 = Color3.fromRGB(120, 60, 120)
UnfreezeButton.Text = "Unfreeze Selected"
UnfreezeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
UnfreezeButton.Font = Enum.Font.Gotham
UnfreezeButton.TextSize = 12
UnfreezeButton.Parent = PartTeleporterFrame

local UnfreezeCorner = Instance.new("UICorner")
UnfreezeCorner.CornerRadius = UDim.new(0, 6)
UnfreezeCorner.Parent = UnfreezeButton

local DeselectButton = Instance.new("TextButton")
DeselectButton.Name = "DeselectButton"
DeselectButton.Size = UDim2.new(0.8, 0, 0, 30)
DeselectButton.Position = UDim2.new(0.1, 0, 0, 170)
DeselectButton.BackgroundColor3 = Color3.fromRGB(120, 60, 60)
DeselectButton.Text = "Deselect All"
DeselectButton.TextColor3 = Color3.fromRGB(255, 255, 255)
DeselectButton.Font = Enum.Font.Gotham
DeselectButton.TextSize = 12
DeselectButton.Parent = PartTeleporterFrame

local DeselectCorner = Instance.new("UICorner")
DeselectCorner.CornerRadius = UDim.new(0, 6)
DeselectCorner.Parent = DeselectButton

local StatusLabelPT = Instance.new("TextLabel")
StatusLabelPT.Name = "StatusLabelPT"
StatusLabelPT.Size = UDim2.new(0.8, 0, 0, 30)
StatusLabelPT.Position = UDim2.new(0.1, 0, 0, 210)
StatusLabelPT.BackgroundTransparency = 1
StatusLabelPT.Text = "–í—ã–±—Ä–∞–Ω–æ: 0 –æ–±—ä–µ–∫—Ç–æ–≤"
StatusLabelPT.TextColor3 = Color3.fromRGB(255, 255, 255)
StatusLabelPT.Font = Enum.Font.Gotham
StatusLabelPT.TextSize = 12
StatusLabelPT.Parent = PartTeleporterFrame

local function updateSelectionCount()
    local count = 0
    for _ in pairs(selectedParts) do
        count = count + 1
    end
    StatusLabelPT.Text = "–í—ã–±—Ä–∞–Ω–æ: " .. count .. " –æ–±—ä–µ–∫—Ç–æ–≤"
end

-- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ Part Teleporter
SelectToggleButton.MouseButton1Click:Connect(function()
    if selectionMode == "OFF" then
        selectionMode = "SELECT"
        SelectToggleButton.Text = "Select Mode: SELECT"
        SelectToggleButton.BackgroundColor3 = Color3.fromRGB(60, 120, 60)
    elseif selectionMode == "SELECT" then
        selectionMode = "DESELECT"
        SelectToggleButton.Text = "Select Mode: DESELECT"
        SelectToggleButton.BackgroundColor3 = Color3.fromRGB(120, 60, 60)
    else
        selectionMode = "OFF"
        SelectToggleButton.Text = "Select Mode: OFF"
        SelectToggleButton.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
    end
end)

TeleportButton.MouseButton1Click:Connect(teleportToCluster)
FreezeButton.MouseButton1Click:Connect(freezeSelected)
UnfreezeButton.MouseButton1Click:Connect(unfreezeSelected)
DeselectButton.MouseButton1Click:Connect(function()
    clearAllSelections()
    updateSelectionCount()
end)

-- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –¥–ª—è Part Teleporter
Mouse.Button1Down:Connect(function()
    if selectionMode == "OFF" then return end
    
    local target = Mouse.Target
    if target and target:IsA("BasePart") then
        if selectionMode == "SELECT" then
            if not selectedParts[target] then
                selectedParts[target] = true
                createSelectionBox(target)
                updateSelectionCount()
            end
        elseif selectionMode == "DESELECT" then
            if selectedParts[target] then
                selectedParts[target] = nil
                removeSelectionBox(target)
                if frozenParts[target] then
                    unfreezePart(target)
                end
                updateSelectionCount()
            end
        end
    end
end)

-- ==================== ANTI-BLACKLIST TAB ====================
local AntiBlacklistFrame = TabFrames["Anti-Blacklist"]

-- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è Anti-Blacklist
local antiBlacklistEnabled = false
local lastValidPosition = nil
local connectionAB = nil

local character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")

-- Toggle Button –¥–ª—è Anti-Blacklist
local AntiBlacklistToggleButton = Instance.new("TextButton")
AntiBlacklistToggleButton.Name = "AntiBlacklistToggleButton"
AntiBlacklistToggleButton.Size = UDim2.new(0.8, 0, 0, 30)
AntiBlacklistToggleButton.Position = UDim2.new(0.1, 0, 0, 10)
AntiBlacklistToggleButton.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
AntiBlacklistToggleButton.Text = "Anti-Blacklist: OFF"
AntiBlacklistToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
AntiBlacklistToggleButton.Font = Enum.Font.Gotham
AntiBlacklistToggleButton.TextSize = 12
AntiBlacklistToggleButton.Parent = AntiBlacklistFrame

local AntiBlacklistToggleCorner = Instance.new("UICorner")
AntiBlacklistToggleCorner.CornerRadius = UDim.new(0, 6)
AntiBlacklistToggleCorner.Parent = AntiBlacklistToggleButton

local StatusLabelAB = Instance.new("TextLabel")
StatusLabelAB.Name = "StatusLabelAB"
StatusLabelAB.Size = UDim2.new(0.8, 0, 0, 50)
StatusLabelAB.Position = UDim2.new(0.1, 0, 0, 50)
StatusLabelAB.BackgroundTransparency = 1
StatusLabelAB.Text = "–ó–∞—â–∏—Ç–∞ –æ—Ç —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏ –≤—ã–∫–ª—é—á–µ–Ω–∞\n–î–∏—Å—Ç–∞–Ω—Ü–∏—è —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è: 50 studs"
StatusLabelAB.TextColor3 = Color3.fromRGB(255, 100, 100)
StatusLabelAB.Font = Enum.Font.Gotham
StatusLabelAB.TextSize = 11
StatusLabelAB.TextWrapped = true
StatusLabelAB.Parent = AntiBlacklistFrame

-- –§—É–Ω–∫—Ü–∏–∏ Anti-Blacklist
local function enableAntiBlacklist()
    if connectionAB then
        connectionAB:Disconnect()
    end
    
    connectionAB = RunService.Heartbeat:Connect(function()
        if not character or not character:FindFirstChild("HumanoidRootPart") then
            return
        end
        
        local rootPart = character.HumanoidRootPart
        local currentPosition = rootPart.Position
        
        if not lastValidPosition then
            lastValidPosition = currentPosition
        end
        
        local distance = (currentPosition - lastValidPosition).Magnitude
        
        if distance > 50 then
            rootPart.CFrame = CFrame.new(lastValidPosition)
        else
            lastValidPosition = currentPosition
        end
    end)
    
    StatusLabelAB.Text = "–ó–∞—â–∏—Ç–∞ –æ—Ç —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏ –í–ö–õ–Æ–ß–ï–ù–ê\n–î–∏—Å—Ç–∞–Ω—Ü–∏—è —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è: 50 studs"
    StatusLabelAB.TextColor3 = Color3.fromRGB(100, 255, 100)
end

local function disableAntiBlacklist()
    if connectionAB then
        connectionAB:Disconnect()
        connectionAB = nil
    end
    
    StatusLabelAB.Text = "–ó–∞—â–∏—Ç–∞ –æ—Ç —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏ –≤—ã–∫–ª—é—á–µ–Ω–∞\n–î–∏—Å—Ç–∞–Ω—Ü–∏—è —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è: 50 studs"
    StatusLabelAB.TextColor3 = Color3.fromRGB(255, 100, 100)
    lastValidPosition = nil
end

AntiBlacklistToggleButton.MouseButton1Click:Connect(function()
    antiBlacklistEnabled = not antiBlacklistEnabled
    
    if antiBlacklistEnabled then
        AntiBlacklistToggleButton.Text = "Anti-Blacklist: ON"
        AntiBlacklistToggleButton.BackgroundColor3 = Color3.fromRGB(0, 150, 80)
        enableAntiBlacklist()
    else
        AntiBlacklistToggleButton.Text = "Anti-Blacklist: OFF"
        AntiBlacklistToggleButton.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
        disableAntiBlacklist()
    end
end)

-- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
LocalPlayer.CharacterAdded:Connect(function(newChar)
    character = newChar
    humanoid = character:WaitForChild("Humanoid")
    lastValidPosition = nil
    
    if antiBlacklistEnabled then
        enableAntiBlacklist()
    end
end)

-- ==================== PLAYER TAB ====================
local PlayerFrame = TabFrames["Player"]

-- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è Player —Ñ—É–Ω–∫—Ü–∏–π
local flyEnabled = false
local noclipEnabled = false
local espEnabled = false
local speedMultiplier = 1
local flySpeed = 50
local carFlySpeed = 50
local espBoxes = {}
local connectionFly = nil
local connectionNoclip = nil
local connectionESP = nil

-- Fly Section
local FlyToggleButton = Instance.new("TextButton")
FlyToggleButton.Name = "FlyToggleButton"
FlyToggleButton.Size = UDim2.new(0.8, 0, 0, 30)
FlyToggleButton.Position = UDim2.new(0.1, 0, 0, 10)
FlyToggleButton.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
FlyToggleButton.Text = "Fly: OFF"
FlyToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
FlyToggleButton.Font = Enum.Font.Gotham
FlyToggleButton.TextSize = 12
FlyToggleButton.Parent = PlayerFrame

local FlyToggleCorner = Instance.new("UICorner")
FlyToggleCorner.CornerRadius = UDim.new(0, 6)
FlyToggleCorner.Parent = FlyToggleButton

local FlySpeedLabel = Instance.new("TextLabel")
FlySpeedLabel.Name = "FlySpeedLabel"
FlySpeedLabel.Size = UDim2.new(0.3, 0, 0, 25)
FlySpeedLabel.Position = UDim2.new(0.1, 0, 0, 50)
FlySpeedLabel.BackgroundTransparency = 1
FlySpeedLabel.Text = "–°–∫–æ—Ä–æ—Å—Ç—å:"
FlySpeedLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
FlySpeedLabel.Font = Enum.Font.Gotham
FlySpeedLabel.TextSize = 12
FlySpeedLabel.TextXAlignment = Enum.TextXAlignment.Left
FlySpeedLabel.Parent = PlayerFrame

local FlySpeedBox = Instance.new("TextBox")
FlySpeedBox.Name = "FlySpeedBox"
FlySpeedBox.Size = UDim2.new(0.3, 0, 0, 25)
FlySpeedBox.Position = UDim2.new(0.5, 0, 0, 50)
FlySpeedBox.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
FlySpeedBox.Text = "50"
FlySpeedBox.TextColor3 = Color3.fromRGB(255, 255, 255)
FlySpeedBox.Font = Enum.Font.Gotham
FlySpeedBox.TextSize = 12
FlySpeedBox.Parent = PlayerFrame

local FlySpeedCorner = Instance.new("UICorner")
FlySpeedCorner.CornerRadius = UDim.new(0, 4)
FlySpeedCorner.Parent = FlySpeedBox

-- Speed Section
local SpeedToggleButton = Instance.new("TextButton")
SpeedToggleButton.Name = "SpeedToggleButton"
SpeedToggleButton.Size = UDim2.new(0.8, 0, 0, 30)
SpeedToggleButton.Position = UDim2.new(0.1, 0, 0, 90)
SpeedToggleButton.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
SpeedToggleButton.Text = "Speed: 1x"
SpeedToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
SpeedToggleButton.Font = Enum.Font.Gotham
SpeedToggleButton.TextSize = 12
SpeedToggleButton.Parent = PlayerFrame

local SpeedToggleCorner = Instance.new("UICorner")
SpeedToggleCorner.CornerRadius = UDim.new(0, 6)
SpeedToggleCorner.Parent = SpeedToggleButton

local SpeedBox = Instance.new("TextBox")
SpeedBox.Name = "SpeedBox"
SpeedBox.Size = UDim2.new(0.3, 0, 0, 25)
SpeedBox.Position = UDim2.new(0.5, 0, 0, 130)
SpeedBox.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
SpeedBox.Text = "1"
SpeedBox.TextColor3 = Color3.fromRGB(255, 255, 255)
SpeedBox.Font = Enum.Font.Gotham
SpeedBox.TextSize = 12
SpeedBox.Parent = PlayerFrame

local SpeedCorner = Instance.new("UICorner")
SpeedCorner.CornerRadius = UDim.new(0, 4)
SpeedCorner.Parent = SpeedBox

-- Car Fly Section
local CarFlyToggleButton = Instance.new("TextButton")
CarFlyToggleButton.Name = "CarFlyToggleButton"
CarFlyToggleButton.Size = UDim2.new(0.8, 0, 0, 30)
CarFlyToggleButton.Position = UDim2.new(0.1, 0, 0, 170)
CarFlyToggleButton.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
CarFlyToggleButton.Text = "Car Fly: OFF"
CarFlyToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CarFlyToggleButton.Font = Enum.Font.Gotham
CarFlyToggleButton.TextSize = 12
CarFlyToggleButton.Parent = PlayerFrame

local CarFlyToggleCorner = Instance.new("UICorner")
CarFlyToggleCorner.CornerRadius = UDim.new(0, 6)
CarFlyToggleCorner.Parent = CarFlyToggleButton

local CarFlySpeedLabel = Instance.new("TextLabel")
CarFlySpeedLabel.Name = "CarFlySpeedLabel"
CarFlySpeedLabel.Size = UDim2.new(0.3, 0, 0, 25)
CarFlySpeedLabel.Position = UDim2.new(0.1, 0, 0, 210)
CarFlySpeedLabel.BackgroundTransparency = 1
CarFlySpeedLabel.Text = "–°–∫–æ—Ä–æ—Å—Ç—å:"
CarFlySpeedLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
CarFlySpeedLabel.Font = Enum.Font.Gotham
CarFlySpeedLabel.TextSize = 12
CarFlySpeedLabel.TextXAlignment = Enum.TextXAlignment.Left
CarFlySpeedLabel.Parent = PlayerFrame

local CarFlySpeedBox = Instance.new("TextBox")
CarFlySpeedBox.Name = "CarFlySpeedBox"
CarFlySpeedBox.Size = UDim2.new(0.3, 0, 0, 25)
CarFlySpeedBox.Position = UDim2.new(0.5, 0, 0, 210)
CarFlySpeedBox.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
CarFlySpeedBox.Text = "50"
CarFlySpeedBox.TextColor3 = Color3.fromRGB(255, 255, 255)
CarFlySpeedBox.Font = Enum.Font.Gotham
CarFlySpeedBox.TextSize = 12
CarFlySpeedBox.Parent = PlayerFrame

local CarFlySpeedCorner = Instance.new("UICorner")
CarFlySpeedCorner.CornerRadius = UDim.new(0, 4)
CarFlySpeedCorner.Parent = CarFlySpeedBox

-- Noclip Section
local NoclipToggleButton = Instance.new("TextButton")
NoclipToggleButton.Name = "NoclipToggleButton"
NoclipToggleButton.Size = UDim2.new(0.8, 0, 0, 30)
NoclipToggleButton.Position = UDim2.new(0.1, 0, 0, 250)
NoclipToggleButton.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
NoclipToggleButton.Text = "Noclip: OFF"
NoclipToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
NoclipToggleButton.Font = Enum.Font.Gotham
NoclipToggleButton.TextSize = 12
NoclipToggleButton.Parent = PlayerFrame

local NoclipToggleCorner = Instance.new("UICorner")
NoclipToggleCorner.CornerRadius = UDim.new(0, 6)
NoclipToggleCorner.Parent = NoclipToggleButton

-- ESP Section
local ESPToggleButton = Instance.new("TextButton")
ESPToggleButton.Name = "ESPToggleButton"
ESPToggleButton.Size = UDim2.new(0.8, 0, 0, 30)
ESPToggleButton.Position = UDim2.new(0.1, 0, 0, 290)
ESPToggleButton.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
ESPToggleButton.Text = "ESP: OFF"
ESPToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ESPToggleButton.Font = Enum.Font.Gotham
ESPToggleButton.TextSize = 12
ESPToggleButton.Parent = PlayerFrame

local ESPToggleCorner = Instance.new("UICorner")
ESPToggleCorner.CornerRadius = UDim.new(0, 6)
ESPToggleCorner.Parent = ESPToggleButton

-- Fly Functions
local function enableFly()
    if connectionFly then
        connectionFly:Disconnect()
    end
    
    connectionFly = RunService.Heartbeat:Connect(function()
        if not character or not character:FindFirstChild("HumanoidRootPart") or not character:FindFirstChild("Humanoid") then
            return
        end
        
        local rootPart = character.HumanoidRootPart
        local humanoid = character.Humanoid
        
        -- –û—Ç–∫–ª—é—á–∞–µ–º –≥—Ä–∞–≤–∏—Ç–∞—Ü–∏—é
        humanoid.PlatformStand = true
        
        local velocity = Vector3.new(0, 0, 0)
        
        if UserInputService:IsKeyDown(Enum.KeyCode.W) then
            velocity = velocity + rootPart.CFrame.LookVector * flySpeed
        end
        if UserInputService:IsKeyDown(Enum.KeyCode.S) then
            velocity = velocity - rootPart.CFrame.LookVector * flySpeed
        end
        if UserInputService:IsKeyDown(Enum.KeyCode.A) then
            velocity = velocity - rootPart.CFrame.RightVector * flySpeed
        end
        if UserInputService:IsKeyDown(Enum.KeyCode.D) then
            velocity = velocity + rootPart.CFrame.RightVector * flySpeed
        end
        if UserInputService:IsKeyDown(Enum.KeyCode.Space) then
            velocity = velocity + Vector3.new(0, flySpeed, 0)
        end
        if UserInputService:IsKeyDown(Enum.KeyCode.LeftShift) or UserInputService:IsKeyDown(Enum.KeyCode.RightShift) then
            velocity = velocity - Vector3.new(0, flySpeed, 0)
        end
        
        rootPart.Velocity = velocity
    end)
end

local function disableFly()
    if connectionFly then
        connectionFly:Disconnect()
        connectionFly = nil
    end
    
    if character and character:FindFirstChild("Humanoid") then
        character.Humanoid.PlatformStand = false
    end
end

-- Speed Functions
local function applySpeed()
    if character and character:FindFirstChild("Humanoid") then
        character.Humanoid.WalkSpeed = 16 * speedMultiplier
        character.Humanoid.JumpPower = 50 * speedMultiplier
    end
end

local function resetSpeed()
    if character and character:FindFirstChild("Humanoid") then
        character.Humanoid.WalkSpeed = 16
        character.Humanoid.JumpPower = 50
    end
end

-- Noclip Functions
local function enableNoclip()
    if connectionNoclip then
        connectionNoclip:Disconnect()
    end
    
    connectionNoclip = RunService.Stepped:Connect(function()
        if character then
            for _, part in pairs(character:GetDescendants()) do
                if part:IsA("BasePart") then
                    part.CanCollide = false
                end
            end
        end
    end)
end

local function disableNoclip()
    if connectionNoclip then
        connectionNoclip:Disconnect()
        connectionNoclip = nil
    end
    
    if character then
        for _, part in pairs(character:GetDescendants()) do
            if part:IsA("BasePart") then
                part.CanCollide = true
            end
        end
    end
end

-- ESP Functions
local function createESPBox(playerChar)
    if espBoxes[playerChar] then
        espBoxes[playerChar]:Destroy()
        espBoxes[playerChar] = nil
    end
    
    local highlight = Instance.new("Highlight")
    highlight.Name = "ESP_Highlight"
    highlight.FillColor = Color3.fromRGB(255, 50, 50)
    highlight.OutlineColor = Color3.fromRGB(255, 255, 255)
    highlight.FillTransparency = 0.5
    highlight.OutlineTransparency = 0
    highlight.Adornee = playerChar
    highlight.Parent = MainGUI
    
    espBoxes[playerChar] = highlight
    
    -- –°–æ–∑–¥–∞–µ–º BillboardGui –¥–ª—è —Ç–µ–∫—Å—Ç–∞
    local billboard = Instance.new("BillboardGui")
    billboard.Name = "ESP_Text"
    billboard.Size = UDim2.new(0, 200, 0, 50)
    billboard.AlwaysOnTop = true
    billboard.StudsOffset = Vector3.new(0, 3, 0)
    local targetPart = playerChar:FindFirstChild("Head") or playerChar:FindFirstChild("HumanoidRootPart")
    if targetPart then
        billboard.Adornee = targetPart
        billboard.Parent = MainGUI
        
        local textLabel = Instance.new("TextLabel")
        textLabel.Name = "ESP_Label"
        textLabel.Size = UDim2.new(1, 0, 1, 0)
        textLabel.BackgroundTransparency = 1
        textLabel.TextStrokeTransparency = 0
        textLabel.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
        textLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
        textLabel.Font = Enum.Font.GothamBold
        textLabel.TextSize = 14
        textLabel.Parent = billboard
        
        -- –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞
        local function updateESPText()
            local player = Players:GetPlayerFromCharacter(playerChar)
            if player then
                local prefix = ""
                local values = player:FindFirstChild("Values")
                if values then
                    local prefixValue = values:FindFirstChild("Prefix")
                    if prefixValue and prefixValue:IsA("StringValue") then
                        prefix = prefixValue.Value
                    end
                end
                
                local distance = 0
                if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
                    local targetRoot = playerChar:FindFirstChild("HumanoidRootPart")
                    if targetRoot then
                        distance = math.floor((targetRoot.Position - LocalPlayer.Character.HumanoidRootPart.Position).Magnitude)
                    end
                end
                
                textLabel.Text = prefix .. player.Name .. "\n" .. tostring(distance) .. " studs"
            end
        end
        
        -- –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç
        updateESPText()
    end
    
    return highlight
end

local function enableESP()
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and player.Character then
            createESPBox(player.Character)
        end
    end
    
    -- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –Ω–æ–≤—ã—Ö –∏–≥—Ä–æ–∫–æ–≤
    if connectionESP then
        connectionESP:Disconnect()
    end
    
    connectionESP = Players.PlayerAdded:Connect(function(player)
        player.CharacterAdded:Connect(function(character)
            if espEnabled then
                wait(1)
                createESPBox(character)
            end
        end)
    end)
    
    -- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∏–≥—Ä–æ–∫–æ–≤
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= LocalPlayer then
            player.CharacterAdded:Connect(function(character)
                if espEnabled then
                    wait(1)
                    createESPBox(character)
                end
            end)
        end
    end
end

local function disableESP()
    if connectionESP then
        connectionESP:Disconnect()
        connectionESP = nil
    end
    
    for character, highlight in pairs(espBoxes) do
        highlight:Destroy()
    end
    espBoxes = {}
end

-- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ Player Tab
FlyToggleButton.MouseButton1Click:Connect(function()
    flyEnabled = not flyEnabled
    
    if flyEnabled then
        FlyToggleButton.Text = "Fly: ON"
        FlyToggleButton.BackgroundColor3 = Color3.fromRGB(0, 150, 80)
        flySpeed = tonumber(FlySpeedBox.Text) or 50
        enableFly()
    else
        FlyToggleButton.Text = "Fly: OFF"
        FlyToggleButton.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
        disableFly()
    end
end)

FlySpeedBox.FocusLost:Connect(function()
    local value = tonumber(FlySpeedBox.Text)
    if value then
        flySpeed = math.clamp(value, 10, 500)
        FlySpeedBox.Text = tostring(flySpeed)
        if flyEnabled then
            enableFly()
        end
    else
        FlySpeedBox.Text = "50"
        flySpeed = 50
    end
end)

SpeedToggleButton.MouseButton1Click:Connect(function()
    local value = tonumber(SpeedBox.Text) or 1
    
    if speedMultiplier == value then
        speedMultiplier = 1
        SpeedToggleButton.Text = "Speed: 1x"
        SpeedToggleButton.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
        resetSpeed()
    else
        speedMultiplier = math.clamp(value, 0.1, 10)
        SpeedToggleButton.Text = "Speed: " .. speedMultiplier .. "x"
        SpeedToggleButton.BackgroundColor3 = Color3.fromRGB(60, 100, 180)
        applySpeed()
    end
end)

SpeedBox.FocusLost:Connect(function()
    local value = tonumber(SpeedBox.Text)
    if value then
        speedMultiplier = math.clamp(value, 0.1, 10)
        SpeedBox.Text = tostring(speedMultiplier)
        SpeedToggleButton.Text = "Speed: " .. speedMultiplier .. "x"
        SpeedToggleButton.BackgroundColor3 = Color3.fromRGB(60, 100, 180)
        applySpeed()
    else
        SpeedBox.Text = "1"
        speedMultiplier = 1
        SpeedToggleButton.Text = "Speed: 1x"
        SpeedToggleButton.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
        resetSpeed()
    end
end)

CarFlyToggleButton.MouseButton1Click:Connect(function()
    -- –û—Ç–∫–ª—é—á–∞–µ–º –æ–±—ã—á–Ω—ã–π Fly –µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω
    if flyEnabled then
        flyEnabled = false
        FlyToggleButton.Text = "Fly: OFF"
        FlyToggleButton.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
        disableFly()
    end
    
    -- –í–∫–ª—é—á–∞–µ–º Car Fly
    carFlySpeed = tonumber(CarFlySpeedBox.Text) or 50
    flySpeed = carFlySpeed
    
    if not flyEnabled then
        flyEnabled = true
        CarFlyToggleButton.Text = "Car Fly: ON"
        CarFlyToggleButton.BackgroundColor3 = Color3.fromRGB(180, 100, 60)
        enableFly()
    else
        flyEnabled = false
        CarFlyToggleButton.Text = "Car Fly: OFF"
        CarFlyToggleButton.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
        disableFly()
    end
end)

CarFlySpeedBox.FocusLost:Connect(function()
    local value = tonumber(CarFlySpeedBox.Text)
    if value then
        carFlySpeed = math.clamp(value, 10, 500)
        CarFlySpeedBox.Text = tostring(carFlySpeed)
        
        if flyEnabled then
            flySpeed = carFlySpeed
            enableFly()
        end
    else
        CarFlySpeedBox.Text = "50"
        carFlySpeed = 50
    end
end)

NoclipToggleButton.MouseButton1Click:Connect(function()
    noclipEnabled = not noclipEnabled
    
    if noclipEnabled then
        NoclipToggleButton.Text = "Noclip: ON"
        NoclipToggleButton.BackgroundColor3 = Color3.fromRGB(0, 150, 80)
        enableNoclip()
    else
        NoclipToggleButton.Text = "Noclip: OFF"
        NoclipToggleButton.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
        disableNoclip()
    end
end)

ESPToggleButton.MouseButton1Click:Connect(function()
    espEnabled = not espEnabled
    
    if espEnabled then
        ESPToggleButton.Text = "ESP: ON"
        ESPToggleButton.BackgroundColor3 = Color3.fromRGB(0, 150, 80)
        enableESP()
    else
        ESPToggleButton.Text = "ESP: OFF"
        ESPToggleButton.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
        disableESP()
    end
end)

-- ==================== –û–ë–©–ò–ï –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò ====================
-- –ó–∞–∫—Ä—ã—Ç–∏–µ –º–µ–Ω—é
CloseButton.MouseButton1Click:Connect(function()
    MainGUI:Destroy()
    
    -- –û—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
    if connectionTelekinesis then
        connectionTelekinesis:Disconnect()
    end
    if connectionAB then
        connectionAB:Disconnect()
    end
    if connectionFly then
        disableFly()
    end
    if connectionNoclip then
        disableNoclip()
    end
    if connectionESP then
        disableESP()
    end
    
    -- –û—á–∏—Å—Ç–∫–∞ —Ç–µ–ª–µ–∫–∏–Ω–µ–∑–∞
    releaseAllParts()
    
    -- –û—á–∏—Å—Ç–∫–∞ Part Teleporter
    clearAllSelections()
    
    -- –û—Ç–∫–ª—é—á–µ–Ω–∏–µ Freecam –µ—Å–ª–∏ –∞–∫—Ç–∏–≤–Ω–∞
    if Freecam.IsEnabled() then
        Freecam.Stop()
    end
end)

-- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –¥–ª—è —Å–±—Ä–æ—Å–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π
LocalPlayer.CharacterAdded:Connect(function(newChar)
    character = newChar
    humanoid = character:WaitForChild("Humanoid")
    
    -- –°–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏–π –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
    if flyEnabled then
        enableFly()
    end
    
    if noclipEnabled then
        enableNoclip()
    end
    
    if speedMultiplier ~= 1 then
        applySpeed()
    end
end)

-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∑–∞–≥—Ä—É–∑–∫–µ
StarterGui:SetCore("SendNotification", {
    Title = "Main Menu Loaded",
    Text = "Menu opened! Use Shift+P to toggle Freecam.",
    Duration = 5
})

print("========================================")
print("üéÆ Main Menu —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω!")
print("========================================")
print("–í–∫–ª–∞–¥–∫–∏:")
print("1. Telekinesis - —Ç–µ–ª–µ–∫–∏–Ω–µ–∑ –æ–±—ä–µ–∫—Ç–æ–≤")
print("2. Part Teleporter - –≤—ã–¥–µ–ª–µ–Ω–∏–µ –∏ —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—è")
print("3. Anti-Blacklist - –∑–∞—â–∏—Ç–∞ –æ—Ç —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏")
print("4. Player - –∏–≥—Ä–æ–≤—ã–µ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏")
print("")
print("–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Freecam:")
print("- Shift+P - –≤–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å Freecam")
print("- WASD + Space/Shift - –¥–≤–∏–∂–µ–Ω–∏–µ")
print("- –ü—Ä–∞–≤–∞—è –∫–Ω–æ–ø–∫–∞ –º—ã—à–∏ - –≤—Ä–∞—â–µ–Ω–∏–µ –∫–∞–º–µ—Ä—ã")
print("========================================")
